<mat-drawer-container hasBackdrop="false" class="container" position="end">
  <mat-drawer
    #drawer
    [mode]="smallScreen ? 'push' : 'side'"
    [opened]="drawerOpen"
    position="end"
    class="pb-recent-people-drawer"
  >
    <div class="pb-recent-people">
      <h1>
        <ng-container
          i18n="
            DashboardComponent|Title of the recent people section@@DashboardComponentTitleRecent"
        >
          Recent People
        </ng-container>
        <button
          mat-button
          *ngIf="removedLastPersons == null && (lastPersons$ | async)?.length != 0"
          (click)="resetLastPersons()"
          i18n="@@GeneralResetButton"
        >
          Reset
        </button>
        <button mat-button *ngIf="removedLastPersons != null" (click)="undoLastPersons()">
          <mat-icon>undo</mat-icon>
          <span i18n="GeneralUndoButton|Button for undoing something@@GeneralUndoButton">
            Undo
          </span>
        </button>
      </h1>
      <cdk-virtual-scroll-viewport itemSize="148" class="pb-recent-people-list">
        <div class="pb-flex-row">
          <ng-container *cdkVirtualFor="let person of lastPersons$ | async">
            <app-user-tiny-card
              [person]="person"
              [actionButtonIcon]="'close'"
              (actionButtonClicked)="removeFromLastPersons(person)"
              class="pb-card"
            ></app-user-tiny-card>
          </ng-container>
          <div
            *ngIf="(lastPersons$ | async)?.length === 0"
            i18n="
              DashboardComponent|Message displayed if no people have been visited
              recently@@DashboardComponentDescriptionRecent"
          >
            Looks like you haven't searched for any colleagues yet. Search for somebody to see how
            it works! The most recent ones will be displayed here.
          </div>
        </div>
      </cdk-virtual-scroll-viewport>
    </div>
  </mat-drawer>
  <mat-drawer-content class="content">
    <div class="pb-bookmarked">
      <div class="pb-bookmarked-title">
        <h1
          i18n="
            DashboardComponent|Title of the Bookmarked people
            section@@DashboardComponentTitleBookmark"
        >
          Bookmarked People
        </h1>
        <mat-form-field>
          <mat-select [(value)]="favoriteSort" (valueChange)="changeOrder()">
            <mat-option
              value=""
              i18n="
                DashboardComponent|The standard (customizable) order of the favorite
                cards@@DashboardComponentOrderNone"
            >
              Custom Order</mat-option
            >
            <mat-option
              value="asc"
              i18n="
                DashboardComponent|The alphabetical asc order of the favorite
                cards@@DashboardComponentOrderAsc"
            >
              Alphabetical asc</mat-option
            >
            <mat-option
              value="desc"
              i18n="
                DashboardComponent|The alphabetical desc order of the favorite
                cards@@DashboardComponentOrderDesc"
            >
              Alphabetical desc</mat-option
            >
          </mat-select>
        </mat-form-field>
        <button
          matTooltip="Language"
          (click)="select.open()"
          mat-icon-button
          class="changeLayoutButton"
          [ngSwitch]="activeLayout$ | async"
        >
          <mat-icon *ngSwitchCase="layout.view_list">view_list</mat-icon>
          <mat-icon *ngSwitchCase="layout.view_stream">view_stream</mat-icon>
          <mat-icon *ngSwitchCase="layout.view_module">view_module</mat-icon>
          <mat-select
            #select
            class="selectLayout"
            [ngModel]="activeLayout$ | async"
            (ngModelChange)="changeLayout($event)"
          >
            <mat-option *ngFor="let view of layouts" [value]="view">
              <span>{{ getLayoutName(view) }}</span>
            </mat-option>
          </mat-select>
        </button>
      </div>
      <!-- This is a workaround for https://github.com/angular/material2/issues/13372 -->
      <div
        cdkDropListGroup
        class="pb-flex-row pb-bookmarks-list"
        [ngSwitch]="activeLayout$ | async"
      >
        <ng-container *ngSwitchCase="layout.view_list">
          <div
            *ngFor="let person of bookmarkedPersons; index as i"
            cdkDropList
            [cdkDropListData]="i"
            cdkDropListOrientation="horizontal"
            class="card-container pb-w-100"
          >
            <app-user-list-card
              [person]="person"
              [actionButtonIcon]="'close'"
              [actionButtonClasses]="'white'"
              (actionButtonClicked)="removeFromBookmarkedPersons(person)"
              class="pb-list-card pb-card"
              cdkDrag
              (cdkDragEntered)="entered($event)"
              (cdkDragEnded)="ended($event)"
              [cdkDragData]="i"
              [cdkDragDisabled]="favoriteSort != ''"
            ></app-user-list-card>
          </div>
        </ng-container>
        <ng-container *ngSwitchCase="layout.view_module">
          <div
            *ngFor="let person of bookmarkedPersons; index as i"
            cdkDropList
            [cdkDropListData]="i"
            cdkDropListOrientation="horizontal"
            class="card-container"
          >
            <app-user-small-card
              [person]="person"
              [actionButtonIcon]="'close'"
              [actionButtonClasses]="'white'"
              (actionButtonClicked)="removeFromBookmarkedPersons(person)"
              class="pb-small-card pb-card"
              cdkDrag
              (cdkDragEntered)="entered($event)"
              (cdkDragEnded)="ended($event)"
              [cdkDragData]="i"
              [cdkDragDisabled]="favoriteSort != ''"
            ></app-user-small-card>
          </div>
        </ng-container>
        <ng-container *ngSwitchCase="layout.view_stream">
          <div
            *ngFor="let person of bookmarkedPersons; index as i"
            cdkDropList
            [cdkDropListData]="i"
            cdkDropListOrientation="horizontal"
            class="card-container"
          >
            <app-user-tiny-card
              [person]="person"
              [actionButtonIcon]="'close'"
              [actionButtonClasses]="'white'"
              (actionButtonClicked)="removeFromBookmarkedPersons(person)"
              class="pb-card"
              cdkDrag
              (cdkDragEntered)="entered($event)"
              (cdkDragEnded)="ended($event)"
              [cdkDragData]="i"
              [cdkDragDisabled]="favoriteSort != ''"
            ></app-user-tiny-card>
          </div>
        </ng-container>
      </div>
      <div
        *ngIf="bookmarkedPersons.length === 0"
        i18n="
          DashboardComponent|Message displayed if no people are
          bookmarked@@DashboardComponentDescriptionBookmark"
      >
        You haven't bookmarked anybody yet, look for the button
        <button mat-icon-button>
          <mat-icon>bookmark_border</mat-icon>
        </button>
        on a workmates page.
      </div>
    </div>
    <div class="toggle-drawer">
      <button
        mat-icon-button
        (click)="toggleDrawer()"
        i18n-matTooltip="
          DashboardComponent|Tooltip for expanding recently viewed
          people@@DashboardComponentButtonExpandTooltip"
        i18n-aria-label="
          DashboardComponent|Aria Label for expanding recently viewed
          people@@DashboardComponentButtonExpandArialLabel"
        matTooltip="Expand or Collapse recently viewed people"
        aria-label="Button expanding or collapsing the recently viewed people section"
      >
        <span>
          <mat-icon>{{ drawer.opened ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }} </mat-icon>
          <span
            i18n="
              DashboardComponent|Title of the recent people section@@DashboardComponentTitleRecent"
            >Recent People</span
          >
        </span>
      </button>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
