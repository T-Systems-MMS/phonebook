trigger: none
pr:
  branches:
    include:
      - master
  paths:
    include:
      - /Phonebook/*

jobs:
  - job: helm
    displayName: helm 
    pool:
      vmImage: 'ubuntu-16.04'
    steps:
    - task: HelmInstaller@1
      inputs:
        helmVersionToInstall: 'latest'
    - script: helm dep update
      workingDirectory: 'Phonebook/phonebook/'
    - script: ls
      workingDirectory: 'Phonebook/phonebook'
    - script: helm package .\phonebook\
      workingDirectory: 'Phonebook/'
    - task: PublishBuildArtifacts@1
      inputs:
        PathtoPublish: '$(Build.ArtifactStagingDirectory)'
        ArtifactName: 'drop'
        publishLocation: 'Container'